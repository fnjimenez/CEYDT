<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kahoot - Estudio del Trabajo</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #333; min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); overflow: hidden; }
        
        /* Pantalla de Moderador */
        .moderator-screen { padding: 40px; text-align: center; display: none; }
        .moderator-controls { background: #f8f9fa; padding: 30px; border-radius: 15px; margin: 20px 0; }
        .game-code { font-size: 48px; font-weight: bold; color: #2c3e50; margin: 20px 0; }
        
        /* Pantalla de Espera */
        .waiting-screen { padding: 40px; text-align: center; display: none; }
        .players-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 30px 0; }
        .player-waiting { background: #f8f9fa; padding: 15px; border-radius: 10px; text-align: center; }
        .player-avatar { width: 60px; height: 60px; border-radius: 50%; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 24px; color: white; }
        
        /* Pantalla de Login */
        .login-screen { padding: 60px 40px; text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .login-form { max-width: 400px; margin: 0 auto; background: white; padding: 40px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); color: #333; }
        .login-form input { width: 100%; padding: 15px; margin: 10px 0; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 16px; transition: border-color 0.3s; }
        .login-form input:focus { border-color: #667eea; outline: none; }
        
        /* Pantalla de Juego */
        .game-screen { display: none; min-height: 600px; }
        .header { background: #2c3e50; color: white; padding: 20px; display: flex; justify-content: space-between; align-items: center; }
        .player-info { display: flex; align-items: center; gap: 15px; }
        .avatar { width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 20px; color: white; }
        .score-display { font-size: 24px; font-weight: bold; color: #f1c40f; }
        
        .question-container { padding: 40px; text-align: center; }
        .question-text { font-size: 28px; font-weight: bold; color: #2c3e50; margin-bottom: 30px; line-height: 1.4; }
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; max-width: 800px; margin: 0 auto; }
        .option { padding: 25px; border-radius: 15px; font-size: 18px; font-weight: bold; cursor: pointer; transition: all 0.3s; border: 3px solid transparent; color: white; text-align: center; }
        .option:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
        .option-a { background: #e74c3c; }
        .option-b { background: #3498db; }
        .option-c { background: #2ecc71; }
        .option-d { background: #f39c12; }
        
        .timer-bar { height: 10px; background: #ecf0f1; margin: 20px 0; border-radius: 5px; overflow: hidden; }
        .timer-progress { height: 100%; background: #e74c3c; width: 100%; transition: width 1s linear; }
        
        /* Resultados */
        .results-screen { display: none; padding: 40px; text-align: center; }
        .ranking { max-width: 600px; margin: 0 auto; }
        .ranking-item { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; margin: 10px 0; background: #f8f9fa; border-radius: 10px; border-left: 5px solid #3498db; }
        .final-score { font-size: 48px; font-weight: bold; color: #f1c40f; margin: 20px 0; }
        .achievement { display: inline-block; background: #f1c40f; color: #2c3e50; padding: 10px 20px; margin: 5px; border-radius: 20px; font-weight: bold; }
        
        /* Botones */
        .btn { padding: 15px 30px; border: none; border-radius: 10px; font-size: 18px; font-weight: bold; cursor: pointer; transition: all 0.3s; margin: 10px; }
        .btn-primary { background: #3498db; color: white; }
        .btn-success { background: #2ecc71; color: white; }
        .btn-danger { background: #e74c3c; color: white; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
    </style>
</head>
<body>
    <div class="container">
        <!-- Pantalla de Moderador -->
        <div class="moderator-screen" id="moderatorScreen">
            <h1>üéÆ Panel de Moderador</h1>
            <div class="moderator-controls">
                <h2>Control del Juego</h2>
                <div class="game-code" id="gameCode">CARGANDO...</div>
                <p>Comparte este c√≥digo con los estudiantes</p>
                
                <div style="margin: 30px 0;">
                    <h3>Jugadores Conectados: <span id="connectedCount">0</span></h3>
                    <div class="players-grid" id="moderatorPlayersList"></div>
                </div>
                
                <button class="btn btn-success" onclick="startGame()" id="startBtn">Comenzar Juego</button>
                <button class="btn btn-danger" onclick="resetGame()">Reiniciar Todo</button>
            </div>
        </div>

        <!-- Pantalla de Espera para Estudiantes -->
        <div class="waiting-screen" id="waitingScreen">
            <h1>üéØ Kahoot - Estudio del Trabajo</h1>
            <div class="game-code" id="studentGameCode">- - - -</div>
            <p>Esperando a que el moderador inicie el juego...</p>
            
            <h3>Jugadores en sala: <span id="playersCount">0</span></h3>
            <div class="players-grid" id="waitingPlayersList"></div>
            
            <div style="margin-top: 30px;">
                <div id="waitingMessage">üü° Conectado - Esperando inicio</div>
            </div>
        </div>

        <!-- Pantalla de Login -->
        <div class="login-screen" id="loginScreen">
            <h1>üéØ Kahoot - Estudio del Trabajo</h1>
            <p class="subtitle">Demuestra tus conocimientos y compite con tus compa√±eros</p>
            
            <div class="login-form">
                <h2>Unirse al Juego</h2>
                <input type="text" id="gameCodeInput" placeholder="C√≥digo del juego" maxlength="6" style="text-align: center; font-weight: bold; font-size: 18px;">
                <input type="text" id="studentName" placeholder="Tu nombre completo" maxlength="20">
                <input type="text" id="studentId" placeholder="Matr√≠cula" maxlength="10">
                <button class="btn btn-primary" onclick="joinGame()">Unirse al Juego</button>
                <div style="margin-top: 20px;">
                    <button class="btn btn-success" onclick="showModeratorScreen()">Soy el Moderador</button>
                </div>
                <div id="firebaseStatus" style="margin-top: 15px; font-size: 12px; color: #666;"></div>
            </div>
        </div>

        <!-- Pantalla de Juego (igual que antes) -->
        <div class="game-screen" id="gameScreen">
            <div class="header">
                <div class="player-info">
                    <div class="avatar" id="playerAvatar">U</div>
                    <div>
                        <div id="playerName">Estudiante</div>
                        <div class="score-display" id="currentScore">0 puntos</div>
                    </div>
                </div>
                <div class="question-counter" id="questionCounter">Pregunta 1/30</div>
            </div>

            <div class="question-container">
                <div class="question-number" id="questionNumber">Pregunta #1</div>
                <div class="question-text" id="questionText">Cargando pregunta...</div>
                
                <div class="timer-bar">
                    <div class="timer-progress" id="timerProgress"></div>
                </div>

                <div class="options-grid">
                    <div class="option option-a" onclick="selectOption('a')">A) Cargando...</div>
                    <div class="option option-b" onclick="selectOption('b')">B) Cargando...</div>
                    <div class="option option-c" onclick="selectOption('c')">C) Cargando...</div>
                    <div class="option option-d" onclick="selectOption('d')">D) Cargando...</div>
                </div>

                <button class="btn btn-primary" id="submitBtn" onclick="submitAnswer()" disabled>Confirmar Respuesta</button>
            </div>
        </div>

        <!-- Pantalla de Resultados -->
        <div class="results-screen" id="resultsScreen">
            <div class="results-header">
                <h1>üèÜ ¬°Juego Terminado!</h1>
                <div class="final-score" id="finalScore">0 puntos</div>
                <p id="performanceMessage">¬°Excelente trabajo!</p>
            </div>

            <div class="achievements" id="achievementsContainer"></div>

            <h2>üèÖ Ranking de la Clase</h2>
            <div class="ranking" id="rankingList"></div>

            <div style="margin-top: 30px;">
                <button class="btn btn-primary" onclick="returnToLobby()">Volver al Lobby</button>
            </div>
        </div>
    </div>

    <script>
        // Configuraci√≥n de Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDm385YCrTr_Ayzdkm6pSUC8BDtIz5aYys",
            authDomain: "evaluacionfinalcurso-f3f5b.firebaseapp.com",
            projectId: "evaluacionfinalcurso-f3f5b",
            storageBucket: "evaluacionfinalcurso-f3f5b.firebasestorage.app",
            messagingSenderId: "275243119732",
            appId: "1:275243119732:web:ecce0263523f8b1e4a0d21",
            measurementId: "G-V3JZVEEFM4"
        };

        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Variables globales
        let currentPlayer = {};
        let currentQuestion = 0;
        let score = 0;
        let selectedOption = null;
        let timeLeft = 30;
        let timerInterval;
        let questions = [];
        let gameCode = '';
        let isModerator = false;
        let playerAvatar = '';
        let gameStarted = false;

        // Avatares predefinidos (como Kahoot)
        const avatars = [
            { emoji: 'üê∂', color: '#FF6B6B' }, { emoji: 'üê±', color: '#4ECDC4' },
            { emoji: 'üê≠', color: '#FFD166' }, { emoji: 'üêπ', color: '#06D6A0' },
            { emoji: 'üê∞', color: '#118AB2' }, { emoji: 'ü¶ä', color: '#073B4C' },
            { emoji: 'üêª', color: '#EF476F' }, { emoji: 'üêº', color: '#7209B7' },
            { emoji: 'üê®', color: '#3A86FF' }, { emoji: 'üêØ', color: '#FB5607' },
            { emoji: 'ü¶Å', color: '#FF006E' }, { emoji: 'üêÆ', color: '#8338EC' }
        ];

        // Banco de 30 preguntas (se mantiene igual)
        const questionBank = [
            // ... (las mismas 30 preguntas del c√≥digo anterior)
            // Work Design & Measurement (5 preguntas)
            {
                question: "¬øQu√© √°rea del IISE se enfoca en el dise√±o de estaciones de trabajo y m√©todos?",
                options: ["Facilities Engineering", "Work Design & Measurement", "Operations Research", "Quality Engineering"],
                correct: "b",
                points: 100,
                category: "Work_Design"
            },
            // ... (resto de las 29 preguntas)
        ];

        // Generar c√≥digo de juego √∫nico
        function generateGameCode() {
            return Math.random().toString(36).substring(2, 8).toUpperCase();
        }

        // Mostrar pantalla de moderador
        async function showModeratorScreen() {
            isModerator = true;
            gameCode = generateGameCode();
            
            // Crear sala de juego
            await db.collection('games').doc(gameCode).set({
                code: gameCode,
                moderator: 'active',
                status: 'waiting',
                createdAt: new Date(),
                players: [],
                currentQuestion: 0,
                gameStarted: false
            });

            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('moderatorScreen').style.display = 'block';
            document.getElementById('gameCode').textContent = gameCode;

            // Escuchar cambios en la sala
            setupGameListener();
        }

        // Unirse como estudiante
        async function joinGame() {
            const code = document.getElementById('gameCodeInput').value.toUpperCase();
            const name = document.getElementById('studentName').value;
            const id = document.getElementById('studentId').value;

            if (!code || !name || !id) {
                alert('Por favor completa todos los campos');
                return;
            }

            // Verificar que la sala existe
            const gameDoc = await db.collection('games').doc(code).get();
            if (!gameDoc.exists) {
                alert('C√≥digo de juego inv√°lido');
                return;
            }

            if (gameDoc.data().gameStarted) {
                alert('El juego ya ha comenzado. No puedes unirte ahora.');
                return;
            }

            gameCode = code;
            
            // Asignar avatar aleatorio
            const randomAvatar = avatars[Math.floor(Math.random() * avatars.length)];
            playerAvatar = randomAvatar.emoji;

            currentPlayer = {
                name: name,
                id: id,
                avatar: playerAvatar,
                avatarColor: randomAvatar.color,
                score: 0,
                connected: true,
                gameCode: gameCode,
                joinedAt: new Date()
            };

            try {
                // Unirse a la sala
                await db.collection('games').doc(gameCode).collection('players').doc(id).set(currentPlayer);
                
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('waitingScreen').style.display = 'block';
                document.getElementById('studentGameCode').textContent = gameCode;

                setupGameListener();
                
            } catch (error) {
                alert('Error al unirse: ' + error.message);
            }
        }

        // Configurar listeners en tiempo real
        function setupGameListener() {
            // Moderador: escuchar jugadores
            if (isModerator) {
                db.collection('games').doc(gameCode).collection('players')
                    .onSnapshot(snapshot => {
                        const playersList = document.getElementById('moderatorPlayersList');
                        const countElement = document.getElementById('connectedCount');
                        updatePlayersList(snapshot, playersList, countElement);
                    });

                // Escuchar estado del juego
                db.collection('games').doc(gameCode)
                    .onSnapshot(doc => {
                        const game = doc.data();
                        if (game && game.gameStarted) {
                            startGameForPlayers();
                        }
                    });
            } else {
                // Estudiante: escuchar otros jugadores y estado del juego
                db.collection('games').doc(gameCode).collection('players')
                    .onSnapshot(snapshot => {
                        const playersList = document.getElementById('waitingPlayersList');
                        const countElement = document.getElementById('playersCount');
                        updatePlayersList(snapshot, playersList, countElement);
                    });

                // Escuchar inicio del juego
                db.collection('games').doc(gameCode)
                    .onSnapshot(doc => {
                        const game = doc.data();
                        if (game && game.gameStarted && !gameStarted) {
                            gameStarted = true;
                            startGameForPlayers();
                        }
                    });
            }
        }

        // Actualizar lista de jugadores
        function updatePlayersList(snapshot, container, countElement) {
            container.innerHTML = '';
            let count = 0;

            snapshot.forEach(doc => {
                const player = doc.data();
                if (player.connected) {
                    count++;
                    const playerElement = document.createElement('div');
                    playerElement.className = 'player-waiting';
                    playerElement.innerHTML = `
                        <div class="player-avatar" style="background: ${player.avatarColor}">${player.avatar}</div>
                        <div style="font-weight: bold;">${player.name}</div>
                        <div style="font-size: 12px; color: #666;">${player.id}</div>
                    `;
                    container.appendChild(playerElement);
                }
            });

            countElement.textContent = count;
        }

        // Iniciar juego (moderador)
        async function startGame() {
            await db.collection('games').doc(gameCode).update({
                gameStarted: true,
                status: 'playing',
                startTime: new Date()
            });

            document.getElementById('moderatorScreen').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'block';
            
            questions = [...questionBank].sort(() => Math.random() - 0.5);
            loadQuestion();
        }

        // Iniciar juego para estudiantes
        function startGameForPlayers() {
            if (isModerator) return;

            document.getElementById('waitingScreen').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'block';
            
            document.getElementById('playerName').textContent = currentPlayer.name;
            document.getElementById('playerAvatar').textContent = currentPlayer.avatar;
            document.getElementById('playerAvatar').style.background = currentPlayer.avatarColor;
            
            questions = [...questionBank].sort(() => Math.random() - 0.5);
            loadQuestion();
        }

        // Las funciones de juego se mantienen igual (loadQuestion, selectOption, submitAnswer, etc.)
        function loadQuestion() {
            if (currentQuestion >= questions.length) {
                endGame();
                return;
            }

            const q = questions[currentQuestion];
            document.getElementById('questionText').textContent = q.question;
            document.getElementById('questionNumber').textContent = `Pregunta #${currentQuestion + 1}`;
            document.getElementById('questionCounter').textContent = `Pregunta ${currentQuestion + 1}/${questions.length}`;

            const options = document.querySelectorAll('.option');
            options.forEach((opt, index) => {
                const letter = String.fromCharCode(97 + index);
                opt.textContent = `${letter.toUpperCase()}) ${q.options[index]}`;
                opt.className = `option option-${letter}`;
                opt.onclick = () => selectOption(letter);
                opt.style.pointerEvents = 'auto';
            });

            selectedOption = null;
            document.getElementById('submitBtn').disabled = true;
            resetTimer();
        }

        function selectOption(option) {
            selectedOption = option;
            document.getElementById('submitBtn').disabled = false;
            
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            document.querySelector(`.option-${option}`).classList.add('selected');
        }

        async function submitAnswer() {
            if (!selectedOption) return;

            const q = questions[currentQuestion];
            const isCorrect = selectedOption === q.correct;
            const optionElement = document.querySelector(`.option-${selectedOption}`);

            // Registrar respuesta
            await db.collection('games').doc(gameCode).collection('answers').add({
                playerId: currentPlayer.id,
                playerName: currentPlayer.name,
                questionIndex: currentQuestion,
                selectedOption: selectedOption,
                isCorrect: isCorrect,
                timestamp: new Date(),
                points: isCorrect ? q.points : 0,
                category: q.category
            });

            if (isCorrect) {
                score += q.points;
                optionElement.classList.add('correct-answer');
                showPointsAnimation(q.points);
                
                // Actualizar puntuaci√≥n en tiempo real
                await db.collection('games').doc(gameCode).collection('players').doc(currentPlayer.id).update({
                    score: score
                });
            } else {
                optionElement.classList.add('incorrect-answer');
                document.querySelector(`.option-${q.correct}`).classList.add('correct-answer');
            }

            updateScore();
            
            document.querySelectorAll('.option').forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            document.getElementById('submitBtn').disabled = true;

            setTimeout(() => {
                currentQuestion++;
                loadQuestion();
            }, 2000);
        }

        function resetTimer() {
            timeLeft = 30;
            clearInterval(timerInterval);
            
            const timerProgress = document.getElementById('timerProgress');
            timerProgress.style.width = '100%';
            timerProgress.style.background = '#2ecc71';
            
            timerInterval = setInterval(() => {
                timeLeft--;
                const progress = (timeLeft / 30) * 100;
                timerProgress.style.width = `${progress}%`;
                
                if (timeLeft <= 10) {
                    timerProgress.style.background = '#e74c3c';
                } else if (timeLeft <= 20) {
                    timerProgress.style.background = '#f39c12';
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    selectedOption = null;
                    submitAnswer();
                }
            }, 1000);
        }

        async function endGame() {
            clearInterval(timerInterval);
            
            // Actualizar estado final
            await db.collection('games').doc(gameCode).collection('players').doc(currentPlayer.id).update({
                finalScore: score,
                completed: true,
                endTime: new Date()
            });

            document.getElementById('gameScreen').style.display = 'none';
            document.getElementById('resultsScreen').style.display = 'block';
            
            document.getElementById('finalScore').textContent = `${score} puntos`;
            showPerformanceMessage();
            showAchievements();
            loadRanking();
        }

        function loadRanking() {
            db.collection('games').doc(gameCode).collection('players')
                .where('completed', '==', true)
                .orderBy('finalScore', 'desc')
                .limit(10)
                .get()
                .then(snapshot => {
                    const ranking = document.getElementById('rankingList');
                    ranking.innerHTML = '';
                    
                    let position = 1;
                    snapshot.forEach(doc => {
                        const player = doc.data();
                        const item = document.createElement('div');
                        item.className = 'ranking-item';
                        
                        let medal = '';
                        if (position === 1) medal = 'ü•á';
                        else if (position === 2) medal = 'ü•à';
                        else if (position === 3) medal = 'ü•â';
                        
                        item.innerHTML = `
                            <div style="font-weight: bold; font-size: 20px; color: #2c3e50;">${medal} ${position}</div>
                            <div style="flex: 1; text-align: left; margin-left: 15px; font-size: 18px;">
                                <span style="font-size: 24px; margin-right: 10px;">${player.avatar}</span>
                                ${player.name}
                            </div>
                            <div style="font-weight: bold; color: #27ae60; font-size: 20px;">${player.finalScore} pts</div>
                        `;
                        
                        if (player.id === currentPlayer.id) {
                            item.style.background = '#e3f2fd';
                            item.style.borderLeftColor = '#2196f3';
                        }
                        
                        ranking.appendChild(item);
                        position++;
                    });
                });
        }

        function returnToLobby() {
            if (isModerator) {
                document.getElementById('resultsScreen').style.display = 'none';
                document.getElementById('moderatorScreen').style.display = 'block';
            } else {
                document.getElementById('resultsScreen').style.display = 'none';
                document.getElementById('waitingScreen').style.display = 'block';
            }
            
            // Resetear variables del juego
            currentQuestion = 0;
            score = 0;
            gameStarted = false;
        }

        async function resetGame() {
            // Eliminar todos los jugadores y respuestas
            const players = await db.collection('games').doc(gameCode).collection('players').get();
            players.forEach(doc => doc.ref.delete());
            
            const answers = await db.collection('games').doc(gameCode).collection('answers').get();
            answers.forEach(doc => doc.ref.delete());
            
            // Resetear estado del juego
            await db.collection('games').doc(gameCode).update({
                gameStarted: false,
                status: 'waiting',
                currentQuestion: 0
            });
            
            alert('Juego reiniciado. Los jugadores pueden unirse nuevamente.');
        }

        // Funciones auxiliares (showPointsAnimation, showPerformanceMessage, showAchievements se mantienen igual)
        function showPointsAnimation(points) {
            const pointsDiv = document.createElement('div');
            pointsDiv.textContent = `+${points}`;
            pointsDiv.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 48px;
                font-weight: bold;
                color: #27ae60;
                z-index: 1000;
                animation: floatUp 1s ease-out;
            `;
            
            document.body.appendChild(pointsDiv);
            
            setTimeout(() => {
                pointsDiv.remove();
            }, 1000);
        }

        function showPerformanceMessage() {
            const maxPossible = 3000;
            const percentage = (score / maxPossible) * 100;
            let message = '';
            
            if (percentage >= 90) message = 'üèÜ ¬°Excelente! Dominas el Body of Knowledge del IISE';
            else if (percentage >= 70) message = 'üéØ ¬°Muy bien! Tienes s√≥lidos conocimientos';
            else if (percentage >= 50) message = 'üëç Buen esfuerzo, sigue practicando';
            else message = 'üí™ Sigue estudiando, lo lograr√°s';
            
            document.getElementById('performanceMessage').textContent = message;
        }

        function showAchievements() {
            const achievements = document.getElementById('achievementsContainer');
            achievements.innerHTML = '';
            
            const maxPossible = 3000;
            const percentage = (score / maxPossible) * 100;
            
            if (percentage >= 90) achievements.innerHTML += '<div class="achievement">üèÖ Experto IISE BOK</div>';
            if (percentage >= 80) achievements.innerHTML += '<div class="achievement">‚ö° Alto Rendimiento</div>';
            if (score >= 2500) achievements.innerHTML += '<div class="achievement">üåü Puntuaci√≥n Elite</div>';
            if (currentQuestion === questions.length) achievements.innerHTML += '<div class="achievement">‚úÖ Completado 30/30</div>';
        }

        // CSS para animaciones
        const style = document.createElement('style');
        style.textContent = `
            @keyframes floatUp {
                0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
                100% { transform: translate(-50%, -100px) scale(1.5); opacity: 0; }
            }
            @keyframes correctAnswer {
                0% { transform: scale(1); }
                50% { transform: scale(1.1); }
                100% { transform: scale(1); }
            }
            @keyframes incorrectAnswer {
                0% { transform: translateX(0); }
                25% { transform: translateX(-10px); }
                50% { transform: translateX(10px); }
                75% { transform: translateX(-10px); }
                100% { transform: translateX(0); }
            }
            .correct-answer { animation: correctAnswer 0.5s ease; background: #27ae60 !important; }
            .incorrect-answer { animation: incorrectAnswer 0.5s ease; background: #e74c3c !important; }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
