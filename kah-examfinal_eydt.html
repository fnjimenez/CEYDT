<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kahoot - Estudio del Trabajo</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Arial, sans-serif; }
        body { background: #46178f; color: #333; min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 15px; overflow: hidden; }
        
        /* Login Screen */
        .login-screen { padding: 40px; text-align: center; background: #46178f; color: white; }
        .login-form { max-width: 400px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; color: #333; }
        .login-form input { width: 100%; padding: 12px; margin: 8px 0; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; }
        .login-form input:focus { border-color: #46178f; outline: none; }
        
        /* Game Screen */
        .game-screen { display: none; }
        .header { background: #46178f; color: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; }
        .player-info { display: flex; align-items: center; gap: 10px; }
        .avatar { width: 40px; height: 40px; border-radius: 50%; background: #ffcd00; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #46178f; }
        .score-display { font-size: 18px; font-weight: bold; color: #ffcd00; }
        
        .question-container { padding: 30px; text-align: center; }
        .question-text { font-size: 24px; font-weight: bold; color: #333; margin-bottom: 20px; }
        
        .timer-bar { height: 8px; background: #ddd; margin: 15px 0; border-radius: 4px; overflow: hidden; }
        .timer-progress { height: 100%; background: #46178f; width: 100%; transition: width 1s linear; }
        
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; max-width: 800px; margin: 0 auto 20px; }
        .option { padding: 20px; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.3s; border: 3px solid transparent; color: white; text-align: center; }
        .option-a { background: #e74c3c; }
        .option-b { background: #3498db; }
        .option-c { background: #2ecc71; }
        .option-d { background: #f39c12; }
        .option:hover { transform: scale(1.05); }
        .option.selected { border-color: white; box-shadow: 0 0 10px rgba(255,255,255,0.5); }
        
        .btn { padding: 12px 30px; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; margin: 10px; background: #46178f; color: white; }
        .btn:disabled { background: #ccc; cursor: not-allowed; }
        
        .correct-answer { background: #27ae60 !important; }
        .incorrect-answer { background: #e74c3c !important; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Pantalla de Login -->
        <div class="login-screen" id="loginScreen">
            <h1>ðŸŽ¯ Kahoot - Estudio del Trabajo</h1>
            <p>Demuestra tus conocimientos y compite con tus compaÃ±eros</p>
            
            <div class="login-form">
                <h2>Registro de Estudiante</h2>
                <input type="text" id="studentName" placeholder="Tu nombre completo" value="Juan PÃ©rez">
                <input type="text" id="studentId" placeholder="MatrÃ­cula" value="2024001">
                <button class="btn" onclick="startDemo()">Â¡Comenzar Juego!</button>
            </div>
        </div>

        <!-- Pantalla de Juego -->
        <div class="game-screen" id="gameScreen">
            <div class="header">
                <div class="player-info">
                    <div class="avatar" id="playerAvatar">J</div>
                    <div>
                        <div id="playerName">Estudiante</div>
                        <div class="score-display" id="currentScore">0 puntos</div>
                    </div>
                </div>
                <div id="questionCounter">Pregunta 1/5</div>
            </div>

            <div class="question-container">
                <div class="question-text" id="questionText">Cargando pregunta...</div>
                
                <div class="timer-bar">
                    <div class="timer-progress" id="timerProgress"></div>
                </div>

                <div class="options-grid">
                    <div class="option option-a" onclick="selectOption('a')">A) Cargando...</div>
                    <div class="option option-b" onclick="selectOption('b')">B) Cargando...</div>
                    <div class="option option-c" onclick="selectOption('c')">C) Cargando...</div>
                    <div class="option option-d" onclick="selectOption('d')">D) Cargando...</div>
                </div>

                <button class="btn" id="submitBtn" onclick="submitAnswer()" disabled>Confirmar Respuesta</button>
            </div>
        </div>
    </div>

    <script>
        // Banco de preguntas simple para demo
        const questionBank = [
            {
                question: "Â¿QuÃ© Ã¡rea del IISE se enfoca en el diseÃ±o de estaciones de trabajo?",
                options: ["Facilities Engineering", "Work Design & Measurement", "Operations Research", "Quality Engineering"],
                correct: "b",
                points: 100
            },
            {
                question: "Â¿QuiÃ©n es considerado el padre de la administraciÃ³n cientÃ­fica?",
                options: ["Henry Gantt", "Frederick Taylor", "Frank Gilbreth", "Henry Ford"],
                correct: "b", 
                points: 100
            },
            {
                question: "Â¿QuÃ© representa el tiempo estÃ¡ndar en estudio de tiempos?",
                options: ["Tiempo promedio", "Tiempo normal mÃ¡s suplementos", "Tiempo mÃ¡s rÃ¡pido", "Tiempo mÃ¡s lento"],
                correct: "b",
                points: 150
            },
            {
                question: "Â¿QuÃ© tÃ©cnica usa cÃ³digos predefinidos para analizar movimientos?",
                options: ["Diagrama de flujo", "Diagrama bimanual", "MTM", "Estudio de tiempos"],
                correct: "c",
                points: 150
            },
            {
                question: "Â¿QuÃ© Ã¡rea utiliza modelos matemÃ¡ticos para optimizar sistemas?",
                options: ["Work Design", "Facilities Engineering", "Operations Research", "Engineering Economy"],
                correct: "c",
                points: 200
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let selectedOption = null;
        let timeLeft = 30;
        let timerInterval;
        let questions = [];

        function startDemo() {
            const name = document.getElementById('studentName').value;
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'block';
            document.getElementById('playerName').textContent = name;
            document.getElementById('playerAvatar').textContent = name.charAt(0).toUpperCase();
            
            questions = [...questionBank];
            loadQuestion();
        }

        function loadQuestion() {
            if (currentQuestion >= questions.length) {
                endGame();
                return;
            }

            const q = questions[currentQuestion];
            document.getElementById('questionText').textContent = q.question;
            document.getElementById('questionCounter').textContent = `Pregunta ${currentQuestion + 1}/${questions.length}`;

            const options = document.querySelectorAll('.option');
            options.forEach((opt, index) => {
                const letter = String.fromCharCode(97 + index);
                opt.textContent = `${letter.toUpperCase()}) ${q.options[index]}`;
                opt.className = `option option-${letter}`;
                opt.onclick = () => selectOption(letter);
                opt.style.pointerEvents = 'auto';
            });

            selectedOption = null;
            document.getElementById('submitBtn').disabled = true;
            resetTimer();
        }

        function selectOption(option) {
            selectedOption = option;
            document.getElementById('submitBtn').disabled = false;
            
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            document.querySelector(`.option-${option}`).classList.add('selected');
        }

        function submitAnswer() {
            if (!selectedOption) return;

            const q = questions[currentQuestion];
            const isCorrect = selectedOption === q.correct;
            const optionElement = document.querySelector(`.option-${selectedOption}`);

            if (isCorrect) {
                score += q.points;
                optionElement.classList.add('correct-answer');
            } else {
                optionElement.classList.add('incorrect-answer');
                document.querySelector(`.option-${q.correct}`).classList.add('correct-answer');
            }

            document.getElementById('currentScore').textContent = `${score} puntos`;
            
            document.querySelectorAll('.option').forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            document.getElementById('submitBtn').disabled = true;

            setTimeout(() => {
                currentQuestion++;
                loadQuestion();
            }, 3000);
        }

        function resetTimer() {
            timeLeft = 30;
            clearInterval(timerInterval);
            
            const timerProgress = document.getElementById('timerProgress');
            timerProgress.style.width = '100%';
            timerProgress.style.background = '#46178f';
            
            timerInterval = setInterval(() => {
                timeLeft--;
                const progress = (timeLeft / 30) * 100;
                timerProgress.style.width = `${progress}%`;
                
                if (timeLeft <= 10) {
                    timerProgress.style.background = '#e74c3c';
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    selectedOption = null;
                    submitAnswer();
                }
            }, 1000);
        }

        function endGame() {
            clearInterval(timerInterval);
            alert(`Â¡Juego terminado! PuntuaciÃ³n final: ${score} puntos`);
            // Reiniciar juego
            currentQuestion = 0;
            score = 0;
            document.getElementById('gameScreen').style.display = 'none';
            document.getElementById('loginScreen').style.display = 'block';
        }

        // Inicializar con datos de demo
        document.addEventListener('DOMContentLoaded', function() {
            console.log("Kahoot cargado - listo para demo");
        });
    </script>
</body>
</html>
